# 索引
索引，在MySQL中也叫做键，是存储引擎用来快速找到记录的一种数据结构。

## B+ Tree 原理
### 数据结构
B Tree 指的是Balance Tree，也就是平衡树，平衡树是一颗查找树，并且所有叶子节点位于同一层。

B+ Tree 是基于B Tree和叶子节点顺序访问指针进行实现，具有B Tree的平衡性，并且通过顺序访问指针来提高区间查询的性能。

B+ Tree 的叶子节点指向的是被索引的数据，而不是其他的节点页。

## MySQL索引
### B+ Tree索引
B+ Tree索引适用于全键值、键值范围或键前缀查找。 其中键前缀查找只适用于根据最左前缀的查找。

InnoDB的B+ Tree索引分为主键索引和辅助索引，主索引的叶子节点存放着完整的数据记录，这种索引方式被称为聚簇索引。一个表只能有一个聚簇索引。

辅助索引的叶子节点的记录着主键的值，因此在使用辅助索引进行查找时，需要先查找到主键值，然后再到主索引中进行查找。

### 哈希索引
能以O(1)的时间查找，但是失去了有序性：
* 无法用于排序与分组；
* 只支持精确查找，无法用于部分查找和范围查找。

### 全文索引
用于查找文本中的关键词，而不是直接比较是否相等。

### 空间数据索引
用于地理数据存储。

## 存储引擎
### InnoDB
MySQL默认的事务性存储引擎，实现了四个标准的隔离等级，默认级别是可重复读，在可重复读隔离级别下，通过MVCC + Next-Key Locking防止幻影读。

主索引是聚簇索引，在索引中保存了数据，从而避免直接读取磁盘，因此对查询性能有很大的提升。

### MyISAM
设计简单，数据以紧密格式存储，对于只读数据或者表比较小，则可以使用它。

不支持事务。

不支持行级锁，只能对整张表加锁，读取时会对需要读到的所有表加共享锁，写入时则对表加排它锁。但在表有读取操作的同时，也可以往表中插入新的记录，被称为并发插入。

### 比较
* 事务：InnoDB是事务型的；
* 并发：MyISAM只支持表级锁，而InnoDB还支持行级锁；
* 外键：InnoDB支持外键；
* 备份：InnoDB支持在线热备份；
* 其他：MyISAM支持压缩表和空间数据索引。

